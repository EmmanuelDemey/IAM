(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"basic",(function(){return basic})),__webpack_require__.d(__webpack_exports__,"WithHandleBack",(function(){return WithHandleBack}));__webpack_require__(31),__webpack_require__(23),__webpack_require__(150);for(var react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_src_home_container__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(167),react_router_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(98),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(266),loadAgentList=function(){return Promise.resolve([{id:"5e2819217a606efe20f8aa44",label:"Deleon Atkins"},{id:"5e281921920f0ea81cbee3b2",label:"Whitaker Knapp"},{id:"5e28192123962f88ad7ab1a2",label:"Yang Osborne"},{id:"5e2819216faa5304dbc3f64a",label:"Karla Carson"},{id:"5e28192123962f88ad7ab1a7",label:"Aang Asborne"}])},fake=[],i=0;10>i;i++)fake.push({persons:[],id:"fake"+i,label:"admin "+i});var loadRoleList=function(){return Promise.resolve([].concat(fake,[{persons:[{id:"5e2819217a606efe20f8aa44",label:"Deleon Atkins",stamp:"1234"}],id:"2",label:"admin2"},{persons:[{id:"5e2819217a606efe20f8aa44",label:"Deleon Atkins",stamp:"1234"}],id:"1",label:"admin"},{persons:[{id:"5e281921920f0ea81cbee3b2",label:"Whitaker Knapp",stamp:"1234"},{id:"5e2819216faa5304dbc3f64a",label:"Karla Carson"},{id:"5e2819217a606efe20f8aa44",label:"Deleon Atkins"}],id:"2",label:"user"}]))};__webpack_exports__.default={title:"Component/Habilitation",component:_src_home_container__WEBPACK_IMPORTED_MODULE_4__.a,includeStories:[]};var basic=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__.a,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_src_home_container__WEBPACK_IMPORTED_MODULE_4__.a,{loadRoleList:loadRoleList,loadAgentList:loadAgentList,displayUpdateBtn:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_6__.boolean)("Display update button",!0)}))};basic.displayName="basic",basic.story={title:"Default"};var WithHandleBack=function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__.a,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_src_home_container__WEBPACK_IMPORTED_MODULE_4__.a,{loadRoleList:loadRoleList,loadAgentList:loadAgentList,handleBack:function handleBack(){return alert("handleBack")},displayUpdateBtn:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_6__.boolean)("Display update button",!0)}))};WithHandleBack.displayName="WithHandleBack",WithHandleBack.story={title:"WithHandleBack"},basic.__docgenInfo={description:"",methods:[],displayName:"basic"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/1-Habilitation.stories.js"]={name:"basic",docgenInfo:basic.__docgenInfo,path:"stories/1-Habilitation.stories.js"}),WithHandleBack.__docgenInfo={description:"",methods:[],displayName:"WithHandleBack"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/1-Habilitation.stories.js"]={name:"WithHandleBack",docgenInfo:WithHandleBack.__docgenInfo,path:"stories/1-Habilitation.stories.js"})},1399:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(595);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(1423)],module)}.call(this,__webpack_require__(1400)(module))},1423:function(module,exports,__webpack_require__){var map={"./0-Welcome.stories.mdx":1424,"./1-Habilitation.stories.js":115,"./1-Habilitation.stories.mdx":1609};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1423},1424:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(11),__webpack_require__(59),__webpack_require__(51),__webpack_require__(19),__webpack_require__(14),__webpack_require__(83),__webpack_require__(56),__webpack_require__(348),__webpack_require__(349),__webpack_require__(16),__webpack_require__(55),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(18),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(97);__webpack_require__(1425),__webpack_require__(1433);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var name,Meta=(name="Meta",function(props){return console.warn("Component "+name+" was not imported, exported, or provided by MDXProvider as global scope"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("div",props)}),layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(Meta,{title:"Documentation/Intro",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"If you want to add the module into your own project, you should first install it via NPM or yarn"),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"Then, you need to include the CSS stylesheet of ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("inlineCode",{parentName:"p"},"bootstrap"),", and another one from ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("inlineCode",{parentName:"p"},"@inseefr/wilco"),", the components library used by ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("strong",{parentName:"p"},"IAM"),"."),_ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"And finally, you can import and use the component we provide.");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h1",{id:"get-started"},"Get started"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-shell"}),"git clone https://github.com/InseeFr/IAM\ncd IAM\nyarn\nyarn start-storybook\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h1",{id:"include-iam-in-my-project"},"Include IAM in my project"),_ref3,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-shell"}),"npm i @inseefr/iam bootstrap@3.4.1\n")),_ref4,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-javascript"}),"import 'bootstrap/dist/css/bootstrap.css';\nimport '@inseefr/wilco/dist/index.css';\n")),_ref5,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-javascript"}),"import Habilitation from '@inseefr/iam';\n\n...\n<Habilitation\n        loadRoleList={...}\n        loadAgentList={...}\n    />\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"Documentation/Intro",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref6=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(MDXContent,null));componentMeta.parameters.docs=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},componentMeta.parameters.docs||{},{page:function page(){return _ref6}}),__webpack_exports__.default=componentMeta},1607:function(module,exports,__webpack_require__){var api=__webpack_require__(350),content=__webpack_require__(1608);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1608:function(module,exports,__webpack_require__){(exports=__webpack_require__(351)(!1)).push([module.i,".iam-roles-picker{color:black}.iam-roles-picker ul{padding-bottom:0;border-bottom:0}.iam-roles-picker li{line-height:2em}.iam-roles-picker input{margin:0.5em 0.5em 1em 1em}.iam-roles-picker button{width:100%;margin:0}\n",""]),module.exports=exports},1609:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"defaultStory",(function(){return defaultStory})),__webpack_require__.d(__webpack_exports__,"withHandleBack",(function(){return withHandleBack}));__webpack_require__(11),__webpack_require__(59),__webpack_require__(51),__webpack_require__(19),__webpack_require__(30),__webpack_require__(14),__webpack_require__(83),__webpack_require__(56),__webpack_require__(348),__webpack_require__(349),__webpack_require__(16),__webpack_require__(55),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(18),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(97),_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(115),_src_home_container__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(167);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("p",null,"This component should be used if you need to manage the role of your users"),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Props,{of:_src_home_container__WEBPACK_IMPORTED_MODULE_16__.a,mdxType:"Props"}),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("p",null,"You also can add a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("inlineCode",{parentName:"p"},"back")," button and define the code that should be executed thanks to the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("inlineCode",{parentName:"p"},"handleBack")," prop");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Meta,{title:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.title,component:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.component,mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("h1",{id:"habilitation"},"Habilitation"),_ref2,_ref3,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Story,{name:"Default",mdxType:"Story"},_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.basic()),_ref4,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Story,{name:"WithHandleBack",mdxType:"Story"},_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.WithHandleBack()))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var defaultStory=function(){return _1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.basic()};defaultStory.story={},defaultStory.story.name="Default",defaultStory.story.parameters={mdxSource:"stories.basic()"};var withHandleBack=function(){return _1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.WithHandleBack()};withHandleBack.story={},withHandleBack.story.name="WithHandleBack",withHandleBack.story.parameters={mdxSource:"stories.WithHandleBack()"};var componentMeta={title:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.title,includeStories:["defaultStory","withHandleBack"]};componentMeta.parameters=componentMeta.parameters||{};var _ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.AddContext,{mdxStoryNameToKey:{Default:"defaultStory",WithHandleBack:"withHandleBack"},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(MDXContent,null));componentMeta.parameters.docs=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},componentMeta.parameters.docs||{},{page:function page(){return _ref5}}),__webpack_exports__.default=componentMeta},167:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(11),__webpack_require__(21),__webpack_require__(32),__webpack_require__(31),__webpack_require__(80),__webpack_require__(36),__webpack_require__(25),__webpack_require__(22),__webpack_require__(37),__webpack_require__(23),__webpack_require__(150),__webpack_require__(43),__webpack_require__(26),__webpack_require__(28);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(58),prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),dictionary=(__webpack_require__(59),__webpack_require__(51),__webpack_require__(106),__webpack_require__(81),__webpack_require__(478),__webpack_require__(83),__webpack_require__(56),__webpack_require__(348),__webpack_require__(349),__webpack_require__(16),__webpack_require__(216),__webpack_require__(55),{pickedRolePlaceholder:{fr:"Sélectionner un rôle...",en:"Select a role..."},nameTitle:{fr:"Nom",en:"Name"},stampTitle:{fr:"Timbre",en:"Unit"},roleTitle:{fr:"Rôle",en:"Role"},save:{fr:"Valider",en:"Save"},manage:{fr:"Gérer",en:"Manage"},visualize:{fr:"Visualiser",en:"Visualize"}}),D1=Object(dist.createDictionary)(dist.firstLang,dictionary),D2=Object(dist.createDictionary)(dist.secondLang,dictionary),build_dictionary=Object(dist.getLang)()===dist.firstLang?D1:D2;__webpack_require__(181),__webpack_require__(135),__webpack_require__(19),__webpack_require__(136),__webpack_require__(1607);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _ref2=react_default.a.createElement("span",{className:"caret"});function RolesPicker(_ref){var _ref$roles=_ref.roles,roles=void 0===_ref$roles?[]:_ref$roles,_ref$person=_ref.person,person=void 0===_ref$person?{}:_ref$person,_ref$defaultOpen=_ref.defaultOpen,defaultOpen=void 0!==_ref$defaultOpen&&_ref$defaultOpen,handleSubmit=_ref.handleSubmit,_useState2=_slicedToArray(Object(react.useState)(defaultOpen),2),open=_useState2[0],setOpen=_useState2[1],_useState4=_slicedToArray(Object(react.useState)(person.roles),2),userRoles=_useState4[0],setUserRoles=_useState4[1],handleClick=Object(react.useCallback)((function(e){e.preventDefault(),setOpen(!open)}),[open]),handleButtonClick=Object(react.useCallback)((function(){var addArray=userRoles.filter((function(role){return!person.roles.includes(role)})),delArray=person.roles.filter((function(role){return!userRoles.includes(role)})),toAdd=0<addArray.length?[{id:person.id,roles:addArray.map((function(label){return roles.find((function(r){return r.label===label})).id}))}]:[],toDelete=0<delArray.length?delArray.map((function(label){return{role:roles.find((function(r){return r.label===label})).id,id:person.id}})):[];handleSubmit({toAdd:toAdd,toDelete:toDelete}),setOpen(!open)}),[userRoles]),handleRoleClick=function(role){return Object(react.useCallback)((function(){var newUserRoles=userRoles.includes(role.label)?userRoles.filter((function(label){return label!==role.label})):[].concat(_toConsumableArray(userRoles),[role.label]);setUserRoles(newUserRoles)}),[userRoles])};return react_default.a.createElement("div",{className:"iam-roles-picker btn-group ".concat(open?"open":"")},react_default.a.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:handleClick},build_dictionary.manage," ",_ref2),react_default.a.createElement("ul",{className:"dropdown-menu"},roles.map((function(role){return react_default.a.createElement("li",{key:role.label},react_default.a.createElement("input",{onChange:handleRoleClick(role),type:"checkbox",checked:0<=userRoles.indexOf(role.label)}),role.label)})),react_default.a.createElement("li",null,react_default.a.createElement("button",{onClick:handleButtonClick},build_dictionary.save))))}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function visualisation_slicedToArray(arr,i){return function visualisation_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function visualisation_iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function visualisation_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}RolesPicker.displayName="RolesPicker",RolesPicker.__docgenInfo={description:"",methods:[],displayName:"RolesPicker",props:{roles:{defaultValue:{value:"[]",computed:!1},required:!1},person:{defaultValue:{value:"{}",computed:!1},required:!1},defaultOpen:{defaultValue:{value:"false",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/roles-picker/index.js"]={name:"RolesPicker",docgenInfo:RolesPicker.__docgenInfo,path:"src/roles-picker/index.js"});var rowParams=[{dataField:"label",text:build_dictionary.nameTitle,width:"40%",sort:!0},{dataField:"stamp",text:build_dictionary.stampTitle,width:"30%",sort:!0},{dataField:"roles",text:build_dictionary.roleTitle,width:"30%",sort:!0}],visualisation_ref2=react_default.a.createElement("div",null);function VisualisationTable(_ref){for(var _ref$roles=_ref.roles,roles=void 0===_ref$roles?[]:_ref$roles,_ref$agents=_ref.agents,agents=void 0===_ref$agents?[]:_ref$agents,handleBack=_ref.handleBack,_ref$displayUpdateBtn=_ref.displayUpdateBtn,displayUpdateBtn=void 0===_ref$displayUpdateBtn||_ref$displayUpdateBtn,handleSave=_ref.handleSave,_useState2=visualisation_slicedToArray(Object(react.useState)("VIEW"),2),mode=_useState2[0],setMode=_useState2[1],handleUpdate=Object(react.useCallback)((function(){setMode("VIEW"===mode?"EDIT":"VIEW")}),[mode]),persons=agents.reduce((function(acc,agent){return _objectSpread({},acc,_defineProperty({},agent.id,_objectSpread({},agent,{roles:[]})))}),{}),_loop=function(i){roles[i].persons.forEach((function(p){persons[p.id].roles.push(roles[i].label)}))},i=0;i<roles.length;i++)_loop(i);var data=Object.values(persons).filter((function(person){return"EDIT"===mode||0<person.roles.length})).sort((function(p1,p2){return p2.roles.length-p1.roles.length||p1.label.localeCompare(p2.label)})).map((function(person){return _objectSpread({},person,{roles:"VIEW"===mode?person.roles.join(","):react_default.a.createElement(RolesPicker,{roles:roles,person:person,handleSubmit:handleSave})})}));return react_default.a.createElement("div",{className:"container"},react_default.a.createElement(dist.ActionToolbar,null,handleBack?react_default.a.createElement(dist.ReturnButton,{action:function action(){return handleBack()}}):visualisation_ref2,"VIEW"===mode&&displayUpdateBtn&&react_default.a.createElement(dist.UpdateButton,{action:handleUpdate}),"EDIT"===mode&&displayUpdateBtn&&react_default.a.createElement(dist.Button,{action:handleUpdate},build_dictionary.visualize)),react_default.a.createElement(dist.Table,{rowParams:rowParams,data:data,search:!0,pagination:!0}))}VisualisationTable.displayName="VisualisationTable",VisualisationTable.__docgenInfo={description:"",methods:[],displayName:"VisualisationTable",props:{roles:{defaultValue:{value:"[]",computed:!1},required:!1},agents:{defaultValue:{value:"[]",computed:!1},required:!1},displayUpdateBtn:{defaultValue:{value:"true",computed:!1},required:!1}}};var visualisation=VisualisationTable;function agents_toConsumableArray(arr){return function agents_arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function agents_iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function agents_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/visualisation.js"]={name:"VisualisationTable",docgenInfo:VisualisationTable.__docgenInfo,path:"src/visualisation.js"});function home_container_toConsumableArray(arr){return function home_container_arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function home_container_iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function home_container_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function home_container_slicedToArray(arr,i){return function home_container_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function home_container_iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function home_container_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _ref4=react_default.a.createElement(dist.Loading,null),_ref5=react_default.a.createElement(dist.Loading,{textType:"saving"}),_ref6=react_default.a.createElement(dist.Loading,null),Habilitation=function(_ref){var addAgent=_ref.addAgent,deleteAgent=_ref.deleteAgent,loadRoleList=_ref.loadRoleList,loadAgentList=_ref.loadAgentList,handleBack=_ref.handleBack,displayUpdateBtn=_ref.displayUpdateBtn,_useState2=home_container_slicedToArray(Object(react.useState)([]),2),agents=_useState2[0],setAgents=_useState2[1],_useState4=home_container_slicedToArray(Object(react.useState)([]),2),roles=_useState4[0],setRoles=_useState4[1],_useState6=home_container_slicedToArray(Object(react.useState)(!0),2),loading=_useState6[0],setLoading=_useState6[1],_useState8=home_container_slicedToArray(Object(react.useState)(!1),2),deleteRequested=_useState8[0],setDeleteRequested=_useState8[1],_useState10=home_container_slicedToArray(Object(react.useState)(!1),2),addRequested=_useState10[0],setAddRequested=_useState10[1],handleAddAgent=function(agents){return setAddRequested(!0),function(agents){return Array.isArray(agents)?agents.reduce((function(acc,_ref){var id=_ref.id,subAcc=_ref.roles.reduce((function(_,role){return[].concat(agents_toConsumableArray(_),[{id:id,role:role}])}),[]);return[].concat(agents_toConsumableArray(acc),agents_toConsumableArray(subAcc))}),[]):[]}(agents).map((function(a){return addAgent(a)}))};return Object(react.useEffect)((function(){Promise.all([loadRoleList(),loadAgentList()]).then((function(_ref2){var _ref3=home_container_slicedToArray(_ref2,2),roles=_ref3[0],agents=_ref3[1];setRoles(roles),setAgents(agents),setLoading(!1)}))}),[]),loading?_ref4:deleteRequested||addRequested?_ref5:roles&&agents?react_default.a.createElement(visualisation,{roles:roles,handleBack:handleBack,displayUpdateBtn:displayUpdateBtn,agents:agents,handleSave:function(data){var toAdd=data.toAdd,toDelete=data.toDelete,agentActions=[];0!==toAdd.length&&(agentActions=[].concat(home_container_toConsumableArray(agentActions),home_container_toConsumableArray(handleAddAgent(toAdd)))),0!==toDelete.length&&(agentActions=[].concat(home_container_toConsumableArray(agentActions),home_container_toConsumableArray(function(agents){return setDeleteRequested(!0),agents.map((function(a){return deleteAgent(a)}))}(toDelete)))),Promise.all(agentActions).then((function(){loadRoleList().then((function(roles){setRoles(roles),setAddRequested(!1),setDeleteRequested(!1)}))}))}}):_ref6};Habilitation.displayName="Habilitation",Habilitation.propTypes={loadAgentList:prop_types_default.a.func.isRequired,loadRoleList:prop_types_default.a.func.isRequired,deleteAgent:prop_types_default.a.func.isRequired,addAgent:prop_types_default.a.func.isRequired,handleBack:prop_types_default.a.func,displayUpdateBtn:prop_types_default.a.bool},Habilitation.defaultProps={loadAgentList:function loadAgentList(){return Promise.resolve()},loadRoleList:function loadRoleList(){return Promise.resolve()},deleteAgent:function deleteAgent(){return Promise.resolve()},addAgent:function addAgent(){return Promise.resolve()},displayUpdateBtn:!0},Habilitation.__docgenInfo={description:"",methods:[],displayName:"Habilitation",props:{loadAgentList:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:"Function returin a Promise. When this promise \n\t  is resolved, will return the list of agents."},loadRoleList:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:"Function returin a Promise. When this promise \n\t  is resolved, will return the list of roles."},deleteAgent:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},addAgent:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},displayUpdateBtn:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},handleBack:{type:{name:"func"},required:!1,description:""}}};__webpack_exports__.a=Habilitation;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/home-container.js"]={name:"Habilitation",docgenInfo:Habilitation.__docgenInfo,path:"src/home-container.js"})},598:function(module,exports,__webpack_require__){__webpack_require__(599),__webpack_require__(741),__webpack_require__(742),__webpack_require__(1389),__webpack_require__(1390),module.exports=__webpack_require__(1399)},661:function(module,exports){}},[[598,1,2]]]);
//# sourceMappingURL=main.e24bbe877e4ee4498c97.bundle.js.map