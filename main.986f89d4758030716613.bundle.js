(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"basic",(function(){return basic})),__webpack_require__.d(__webpack_exports__,"WithHandleBack",(function(){return WithHandleBack}));__webpack_require__(21),__webpack_require__(152);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_src_home_container__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(169),react_router_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(98),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(268),loadAgentList=function(){return Promise.resolve([{id:"5e281921920f0ea81cbee3b2",label:"Whitaker Knapp"},{id:"5e28192123962f88ad7ab1a2",label:"Yang Osborne"},{id:"5e2819216faa5304dbc3f64a",label:"Karla Carson"}])},loadRoleList=function(){return Promise.resolve([{persons:[{id:"5e2819217a606efe20f8aa44",label:"Deleon Atkins",stamp:"1234"},{id:"5e28192123962f88ad7ab1a2",label:"Yang Osborne"}],id:"1",label:"admin"},{persons:[{id:"5e281921920f0ea81cbee3b2",label:"Whitaker Knapp",stamp:"1234"},{id:"5e28192123962f88ad7ab1a2",label:"Yang Osborne"},{id:"5e2819216faa5304dbc3f64a",label:"Karla Carson"},{id:"5e281921e326a1a2a108193e",label:"Casandra Wise"},{id:"5e2819217a606efe20f8aa44",label:"Deleon Atkins"},{id:"5e281921a548739a0173c7bc",label:"Rochelle Mcfarland"},{id:"5e2819211f270e9b3056f91b",label:"Shanna Dudley"},{id:"5e281921f802894c347f6833",label:"Milagros Ortega"},{id:"5e281921a0dbf7c07a87b02a",label:"Schroeder Sykes"}],id:"2",label:"user"}])};__webpack_exports__.default={title:"Component/Habilitation",component:_src_home_container__WEBPACK_IMPORTED_MODULE_3__.a,includeStories:[]};var basic=function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__.a,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_src_home_container__WEBPACK_IMPORTED_MODULE_3__.a,{loadRoleList:loadRoleList,loadAgentList:loadAgentList,displayUpdateBtn:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_5__.boolean)("Display update button",!0)}))};basic.displayName="basic",basic.story={title:"Default"};var WithHandleBack=function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__.a,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_src_home_container__WEBPACK_IMPORTED_MODULE_3__.a,{loadRoleList:loadRoleList,loadAgentList:loadAgentList,handleBack:function handleBack(){return alert("handleBack")},displayUpdateBtn:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_5__.boolean)("Display update button",!0)}))};WithHandleBack.displayName="WithHandleBack",WithHandleBack.story={title:"WithHandleBack"},basic.__docgenInfo={description:"",methods:[],displayName:"basic"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/1-Habilitation.stories.js"]={name:"basic",docgenInfo:basic.__docgenInfo,path:"stories/1-Habilitation.stories.js"}),WithHandleBack.__docgenInfo={description:"",methods:[],displayName:"WithHandleBack"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/1-Habilitation.stories.js"]={name:"WithHandleBack",docgenInfo:WithHandleBack.__docgenInfo,path:"stories/1-Habilitation.stories.js"})},1399:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(594);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(1423)],module)}.call(this,__webpack_require__(1400)(module))},1423:function(module,exports,__webpack_require__){var map={"./0-Welcome.stories.mdx":1424,"./1-Habilitation.stories.js":114,"./1-Habilitation.stories.mdx":1607};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1423},1424:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(11),__webpack_require__(58),__webpack_require__(46),__webpack_require__(22),__webpack_require__(14),__webpack_require__(70),__webpack_require__(50),__webpack_require__(198),__webpack_require__(199),__webpack_require__(15),__webpack_require__(49),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(37),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(97);__webpack_require__(1425),__webpack_require__(1433);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var name,Meta=(name="Meta",function(props){return console.warn("Component "+name+" was not imported, exported, or provided by MDXProvider as global scope"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("div",props)}),layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(Meta,{title:"Documentation/Intro",mdxType:"Meta"});function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h1",{id:"get-started"},"Get started"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{}),"git clone https://github.com/InseeFr/IAM\ncd IAM\nyarn\nyarn start-storybook\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"Documentation/Intro",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(MDXContent,null));componentMeta.parameters.docs=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},componentMeta.parameters.docs||{},{page:function page(){return _ref3}}),__webpack_exports__.default=componentMeta},1607:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"defaultStory",(function(){return defaultStory})),__webpack_require__.d(__webpack_exports__,"withHandleBack",(function(){return withHandleBack}));__webpack_require__(11),__webpack_require__(58),__webpack_require__(46),__webpack_require__(22),__webpack_require__(29),__webpack_require__(14),__webpack_require__(70),__webpack_require__(50),__webpack_require__(198),__webpack_require__(199),__webpack_require__(15),__webpack_require__(49),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(37),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(97),_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(114),_src_home_container__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(169);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("p",null,"This component should be used if you need to manage the role of your users"),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Props,{of:_src_home_container__WEBPACK_IMPORTED_MODULE_16__.a,mdxType:"Props"}),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("p",null,"You also can add a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("inlineCode",{parentName:"p"},"back")," button and define the code that should be executed thanks to the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("inlineCode",{parentName:"p"},"handleBack")," prop");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Meta,{title:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.title,component:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.component,mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("h1",{id:"habilitation"},"Habilitation"),_ref2,_ref3,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Story,{name:"Default",mdxType:"Story"},_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.basic()),_ref4,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Story,{name:"WithHandleBack",mdxType:"Story"},_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.WithHandleBack()))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var defaultStory=function(){return _1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.basic()};defaultStory.story={},defaultStory.story.name="Default",defaultStory.story.parameters={mdxSource:"stories.basic()"};var withHandleBack=function(){return _1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.WithHandleBack()};withHandleBack.story={},withHandleBack.story.name="WithHandleBack",withHandleBack.story.parameters={mdxSource:"stories.WithHandleBack()"};var componentMeta={title:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.title,includeStories:["defaultStory","withHandleBack"]};componentMeta.parameters=componentMeta.parameters||{};var _ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.AddContext,{mdxStoryNameToKey:{Default:"defaultStory",WithHandleBack:"withHandleBack"},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(MDXContent,null));componentMeta.parameters.docs=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},componentMeta.parameters.docs||{},{page:function page(){return _ref5}}),__webpack_exports__.default=componentMeta},169:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(11),__webpack_require__(18),__webpack_require__(30),__webpack_require__(36),__webpack_require__(76),__webpack_require__(31),__webpack_require__(24),__webpack_require__(19),__webpack_require__(32),__webpack_require__(21),__webpack_require__(152),__webpack_require__(41),__webpack_require__(25),__webpack_require__(26);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(39),prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),dictionary=(__webpack_require__(58),__webpack_require__(46),__webpack_require__(121),__webpack_require__(70),__webpack_require__(50),__webpack_require__(198),__webpack_require__(199),__webpack_require__(15),__webpack_require__(220),__webpack_require__(122),__webpack_require__(49),{pickedRolePlaceholder:{fr:"Sélectionner un rôle...",en:"Select a role..."},nameTitle:{fr:"Nom",en:"Name"},stampTitle:{fr:"Timbre",en:"Unit"},roleTitle:{fr:"Rôle",en:"Role"}}),D1=Object(dist.createDictionary)(dist.firstLang,dictionary),D2=Object(dist.createDictionary)(dist.secondLang,dictionary),build_dictionary=Object(dist.getLang)()===dist.firstLang?D1:D2;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}react_default.a.createElement("a",{href:"#"},"Separated link");var _ref6=react_default.a.createElement("div",null);function VisualisationTable(_ref5){for(var _ref5$roles=_ref5.roles,roles=void 0===_ref5$roles?[]:_ref5$roles,handleBack=_ref5.handleBack,handleUpdate=_ref5.handleUpdate,_ref5$displayUpdateBt=_ref5.displayUpdateBtn,displayUpdateBtn=void 0===_ref5$displayUpdateBt||_ref5$displayUpdateBt,persons={},_loop=function(i){roles[i].persons.forEach((function(p){persons[p.id]?persons[p.id].roles+=","+roles[i].label:persons[p.id]=_objectSpread({},p,{roles:roles[i].label})}))},i=0;i<roles.length;i++)_loop(i);var data=Object.values(persons).map((function(person){return _objectSpread({},person)})),rowParams=[{dataField:"label",text:build_dictionary.nameTitle,width:"40%",sort:!0},{dataField:"stamp",text:build_dictionary.stampTitle,width:"30%",sort:!0},{dataField:"roles",text:build_dictionary.roleTitle,width:"30%",sort:!0}];return react_default.a.createElement("div",{className:"container"},react_default.a.createElement(dist.ActionToolbar,null,handleBack?react_default.a.createElement(dist.ReturnButton,{action:function action(){return handleBack()}}):_ref6,displayUpdateBtn&&handleUpdate&&react_default.a.createElement(dist.UpdateButton,{action:function action(){return handleUpdate()}})),react_default.a.createElement(dist.Table,{rowParams:rowParams,data:data,search:!0,pagination:!0}))}VisualisationTable.displayName="VisualisationTable",VisualisationTable.__docgenInfo={description:"",methods:[],displayName:"VisualisationTable",props:{roles:{defaultValue:{value:"[]",computed:!1},required:!1},displayUpdateBtn:{defaultValue:{value:"true",computed:!1},required:!1}}};var visualisation=VisualisationTable;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/visualisation.js"]={name:"VisualisationTable",docgenInfo:VisualisationTable.__docgenInfo,path:"src/visualisation.js"});__webpack_require__(149),__webpack_require__(188),__webpack_require__(150),__webpack_require__(189),__webpack_require__(82),__webpack_require__(120);function utils_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function utils_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?utils_ownKeys(Object(source),!0).forEach((function(key){utils_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):utils_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function utils_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var extractAdded=function(agents,newAgents){return Object(dist.arrayDifferenceByID)(agents.filter((function(a){return a.isAdded})),newAgents.filter((function(a){return a.isAdded})))},buildDataToAdd=function(toAdd){return Object.entries(toAdd).reduce((function(_,o){return o[1].map((function(p){if(0===_.filter((function(s){return s.id===p.id})).length)return _.push({id:p.id,roles:[o[0]]}),_;var save=_.filter((function(s){return s.id!==p.id})),up=_.find((function(s){return s.id===p.id}));return up.roles=[].concat(_toConsumableArray(up.roles),[o[0]]),[].concat(_toConsumableArray(save),[up])})),_}),[])},buildDataToDelete=function(toDelete){return Object.entries(toDelete).reduce((function(_,o){return o[1].map((function(p){return _.push({role:o[0],id:p.id})})),_}),[])},buildAgents=function(agents,roles,selectedRole){var personsId=0!==roles.length?roles.find((function(r){return r.id===selectedRole})).persons.map((function(p){return p.id})):[];return agents.map((function(a){return personsId.includes(a.id)?utils_objectSpread({},a,{isAdded:!0}):utils_objectSpread({},a,{isAdded:!1})}))};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function update_toConsumableArray(arr){return function update_arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function update_iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function update_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function update_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function update_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?update_ownKeys(Object(source),!0).forEach((function(key){update_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):update_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function update_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var update_Update=function(_Component){function Update(props){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Update),_this=_possibleConstructorReturn(this,_getPrototypeOf(Update).call(this,props));var agents=props.agents,roles=props.roles,options=roles.map((function(role){return{label:role.label,value:role.id}}));return _this.state={options:options,selectedRole:options[0],toAdd:{},toDelete:{},newAgents:buildAgents(agents,roles,options[0].value),oldAgents:buildAgents(agents,roles,options[0].value)},_this.onSelect=function(selectedRoleId){var selectedRole=_this.state.options.find((function(_ref){return _ref.value===selectedRoleId})),_this$props=_this.props,agents=_this$props.agents,roles=_this$props.roles;_this.setState({selectedRole:selectedRole,oldAgents:buildAgents(agents,roles,selectedRole.value),newAgents:buildAgents(agents,roles,selectedRole.value)})},_this.handleSave=function(){var _this$state=_this.state,data=function(toAdd,toDelete){return{toAdd:buildDataToAdd(toAdd),toDelete:buildDataToDelete(toDelete)}}(_this$state.toAdd,_this$state.toDelete);_this.props.handleSave(data)},_this.onChangePicker=function(agents){var _this$state2=_this.state,oldAgents=_this$state2.oldAgents,selectedRole=_this$state2.selectedRole,toAdd=_this$state2.toAdd,toDelete=_this$state2.toDelete,addArray=extractAdded(agents,oldAgents),delArray=function(agents,newAgents){return extractAdded(newAgents,agents)}(agents,oldAgents);0!==addArray.length&&_this.setState({toAdd:update_objectSpread({},toAdd,update_defineProperty({},selectedRole.value,update_toConsumableArray(addArray)))}),0!==delArray.length&&_this.setState({toDelete:update_objectSpread({},toDelete,update_defineProperty({},selectedRole.value,update_toConsumableArray(delArray)))})},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Update,_Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Update,[{key:"render",value:function render(){var _this2=this,_this$state3=this.state,selectedRole=_this$state3.selectedRole,newAgents=_this$state3.newAgents,toAdd=_this$state3.toAdd,toDelete=_this$state3.toDelete,options=_this$state3.options;return react_default.a.createElement("div",{className:"container"},react_default.a.createElement(dist.ActionToolbar,null,react_default.a.createElement(dist.ReturnButton,{action:function action(){return _this2.props.handleBack()}}),react_default.a.createElement(dist.SaveButton,{action:this.handleSave,disabled:0===Object.keys(update_objectSpread({},toAdd,{},toDelete)).length})),react_default.a.createElement("div",{className:"row"},react_default.a.createElement("div",{className:"col-md-6 col-md-offset-3"},react_default.a.createElement("div",{className:"form-group"},react_default.a.createElement(dist.Select,{id:"role-picker",placeholder:build_dictionary.pickedRolePlaceholder,value:selectedRole,options:options,onChange:this.onSelect,searchable:!0,unclearable:!0})))),react_default.a.createElement(dist.Picker,{items:newAgents,panelTitle:selectedRole.label,onChange:this.onChangePicker}))}}]),Update}(react.Component);update_Update.displayName="Update",update_Update.__docgenInfo={description:"",methods:[],displayName:"Update"};var src_update=update_Update;function agents_toConsumableArray(arr){return function agents_arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function agents_iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function agents_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/update.js"]={name:"Update",docgenInfo:update_Update.__docgenInfo,path:"src/update.js"});function home_container_toConsumableArray(arr){return function home_container_arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function home_container_iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function home_container_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function home_container_slicedToArray(arr,i){return function home_container_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function home_container_iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function home_container_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var home_container_ref4=react_default.a.createElement(dist.Loading,null),home_container_ref5=react_default.a.createElement(dist.Loading,{textType:"saving"}),home_container_ref6=react_default.a.createElement(dist.Loading,null),Habilitation=function(_ref){var addAgent=_ref.addAgent,deleteAgent=_ref.deleteAgent,loadRoleList=_ref.loadRoleList,loadAgentList=_ref.loadAgentList,handleBack=_ref.handleBack,displayUpdateBtn=_ref.displayUpdateBtn,_useState2=home_container_slicedToArray(Object(react.useState)([]),2),agents=_useState2[0],setAgents=_useState2[1],_useState4=home_container_slicedToArray(Object(react.useState)([]),2),roles=_useState4[0],setRoles=_useState4[1],_useState6=home_container_slicedToArray(Object(react.useState)(!0),2),loading=_useState6[0],setLoading=_useState6[1],_useState8=home_container_slicedToArray(Object(react.useState)(!1),2),deleteRequested=_useState8[0],setDeleteRequested=_useState8[1],_useState10=home_container_slicedToArray(Object(react.useState)(!1),2),addRequested=_useState10[0],setAddRequested=_useState10[1],_useState12=home_container_slicedToArray(Object(react.useState)(!1),2),update=_useState12[0],setUpdate=_useState12[1],handleAddAgent=function(agents){return setAddRequested(!0),function(agents){return Array.isArray(agents)?agents.reduce((function(acc,_ref){var id=_ref.id,subAcc=_ref.roles.reduce((function(_,role){return[].concat(agents_toConsumableArray(_),[{id:id,role:role}])}),[]);return[].concat(agents_toConsumableArray(acc),agents_toConsumableArray(subAcc))}),[]):[]}(agents).map((function(a){return addAgent(a)}))};return Object(react.useEffect)((function(){Promise.all([loadRoleList(),loadAgentList()]).then((function(_ref2){var _ref3=home_container_slicedToArray(_ref2,2),roles=_ref3[0],agents=_ref3[1];setRoles(roles),setAgents(agents),setLoading(!1)}))}),[]),loading?home_container_ref4:deleteRequested||addRequested?home_container_ref5:roles&&agents?react_default.a.createElement(react_default.a.Fragment,null,update&&react_default.a.createElement(src_update,{roles:roles,agents:agents,handleSave:function(data){var toAdd=data.toAdd,toDelete=data.toDelete,agentActions=[];0!==toAdd.length&&(agentActions=[].concat(home_container_toConsumableArray(agentActions),home_container_toConsumableArray(handleAddAgent(toAdd)))),0!==toDelete.length&&(agentActions=[].concat(home_container_toConsumableArray(agentActions),home_container_toConsumableArray(function(agents){return setDeleteRequested(!0),agents.map((function(a){return deleteAgent(a)}))}(toDelete)))),Promise.all(agentActions).then((function(){loadRoleList().then((function(roles){setRoles(roles),setAddRequested(!1),setDeleteRequested(!1),setUpdate(!1)}))}))},handleBack:function(){return setUpdate(!1)}}),!update&&react_default.a.createElement(visualisation,{roles:roles,handleUpdate:function handleUpdate(){return setUpdate(!0)},handleBack:handleBack,displayUpdateBtn:displayUpdateBtn})):home_container_ref6};Habilitation.displayName="Habilitation",Habilitation.propTypes={loadAgentList:prop_types_default.a.func.isRequired,loadRoleList:prop_types_default.a.func.isRequired,deleteAgent:prop_types_default.a.func.isRequired,addAgent:prop_types_default.a.func.isRequired,handleBack:prop_types_default.a.func,displayUpdateBtn:prop_types_default.a.bool},Habilitation.defaultProps={loadAgentList:function loadAgentList(){return Promise.resolve()},loadRoleList:function loadRoleList(){return Promise.resolve()},deleteAgent:function deleteAgent(){return Promise.resolve()},addAgent:function addAgent(){return Promise.resolve()},displayUpdateBtn:!0},Habilitation.__docgenInfo={description:"",methods:[],displayName:"Habilitation",props:{loadAgentList:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:"Function returin a Promise. When this promise \n\t  is resolved, will return the list of agents."},loadRoleList:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:"Function returin a Promise. When this promise \n\t  is resolved, will return the list of roles."},deleteAgent:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},addAgent:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},displayUpdateBtn:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},handleBack:{type:{name:"func"},required:!1,description:""}}};__webpack_exports__.a=Habilitation;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/home-container.js"]={name:"Habilitation",docgenInfo:Habilitation.__docgenInfo,path:"src/home-container.js"})},597:function(module,exports,__webpack_require__){__webpack_require__(598),__webpack_require__(740),__webpack_require__(741),__webpack_require__(1389),__webpack_require__(1390),module.exports=__webpack_require__(1399)},660:function(module,exports){}},[[597,1,2]]]);
//# sourceMappingURL=main.986f89d4758030716613.bundle.js.map