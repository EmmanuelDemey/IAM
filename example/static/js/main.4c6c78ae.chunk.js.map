{"version":3,"sources":["data/init.js","data/fake-api.js","app.js","index.js"],"names":["agents","id","stamp","label","roles","persons","loadAgentList","Promise","resolve","init","App","useState","initRoles","setRoles","loading","setLoading","className","API","loadRoleList","then","deleteAgent","a","role","newRoles","reduce","acc","r","accP","p","handleDelete","addAgent","find","handleAdd","ReactDOM","render","document","getElementById"],"mappings":"6OAAaA,EAAS,CACrB,CAAEC,GAAI,IAAKC,MAAO,IAAKC,MAAO,QAC9B,CAAEF,GAAI,IAAKC,MAAO,IAAKC,MAAO,SAGlBC,EAAQ,CACpB,CACCH,GAAI,IACJE,MAAO,QACPE,QAAS,CAAC,CAAEJ,GAAI,IAAKC,MAAO,IAAKC,MAAO,UAEzC,CACCF,GAAI,IACJE,MAAO,QACPE,QAAS,CAAC,CAAEJ,GAAI,IAAKC,MAAO,IAAKC,MAAO,WCZ7BG,EAAgB,kBAAMC,QAAQC,QAAQC,ICqDpCC,EAlDH,WAAO,IAAD,EACSC,mBAASC,GADlB,mBACVR,EADU,KACHS,EADG,OAEaF,oBAAS,GAFtB,mBAEVG,EAFU,KAEDC,EAFC,KA4BjB,OACC,oCACC,wBAAIC,UAAU,YAAd,eACCF,GAAW,uCACVA,GACD,kBAAC,eAAD,CACCR,cAAeW,EACfC,aAAc,kBDpCS,SAAAd,GAAK,OAAIG,QAAQC,QAAQJ,GCqC/Ca,CAAiBb,GAAOe,MAAK,SAAAf,GAG5B,OAFAW,GAAW,GAEJX,MAGTgB,YAAa,SAAAC,GAAC,OA5BG,SAAC,GAAkB,IAAhBpB,EAAe,EAAfA,GAAIqB,EAAW,EAAXA,KAC3BP,GAAW,GAEX,IAAMQ,EAAWnB,EAAMoB,QAAO,SAACC,EAAKC,GACnC,GAAIA,EAAEzB,KAAOqB,EAAM,MAAM,GAAN,mBAAWG,GAAX,CAAgBC,IACnC,IAAMrB,EAAUqB,EAAErB,QAAQmB,QAAO,SAACG,EAAMC,GACvC,OAAIA,EAAE3B,KAAOA,EAAU,GAAN,mBAAW0B,GAAX,CAAiBC,IAC3BD,IACL,IACH,MAAM,GAAN,mBAAWF,GAAX,gBAAqBC,EAArB,CAAwBrB,gBACtB,IACHQ,EAASU,GAiBYM,CAAaR,IAC/BS,SAAU,SAAAT,GAAC,OAvCG,SAAC,GAAkB,IAAhBpB,EAAe,EAAfA,GAAIqB,EAAW,EAAXA,KACxBP,GAAW,GACX,IAAMQ,EAAWnB,EAAMoB,QAAO,SAACC,EAAKC,GACnC,GAAIA,EAAEzB,KAAOqB,EAAM,MAAM,GAAN,mBAAWG,GAAX,CAAgBC,IACnC,IAAMrB,EAAO,sBAAOqB,EAAErB,SAAT,CAAkBL,EAAO+B,MAAK,SAAAV,GAAC,OAAIA,EAAEpB,KAAOA,OACzD,MAAM,GAAN,mBAAWwB,GAAX,gBAAqBC,EAArB,CAAwBrB,gBACtB,IACHQ,EAASU,GAgCSS,CAAUX,Q,4BCxC9BY,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.4c6c78ae.chunk.js","sourcesContent":["export const agents = [\n\t{ id: '1', stamp: '1', label: 'Toto' },\n\t{ id: '2', stamp: '2', label: 'Titi' },\n];\n\nexport const roles = [\n\t{\n\t\tid: '1',\n\t\tlabel: 'Admin',\n\t\tpersons: [{ id: '1', stamp: '1', label: 'Toto' }],\n\t},\n\t{\n\t\tid: '2',\n\t\tlabel: 'Guest',\n\t\tpersons: [{ id: '2', stamp: '2', label: 'Titi' }],\n\t},\n];\n","import * as init from './init';\n\nexport const loadAgentList = () => Promise.resolve(init.agents);\n\nexport const loadRoleList = roles => Promise.resolve(roles);\n","import React, { useState } from 'react';\nimport { Habilitation } from '@inseefr/iam';\nimport * as API from './data/fake-api';\nimport { agents, roles as initRoles } from './data/init';\n\nconst App = () => {\n\tconst [roles, setRoles] = useState(initRoles);\n\tconst [loading, setLoading] = useState(false);\n\n\tconst handleAdd = ({ id, role }) => {\n\t\tsetLoading(true);\n\t\tconst newRoles = roles.reduce((acc, r) => {\n\t\t\tif (r.id !== role) return [...acc, r];\n\t\t\tconst persons = [...r.persons, agents.find(a => a.id === id)];\n\t\t\treturn [...acc, { ...r, persons }];\n\t\t}, []);\n\t\tsetRoles(newRoles);\n\t};\n\n\tconst handleDelete = ({ id, role }) => {\n\t\tsetLoading(true);\n\n\t\tconst newRoles = roles.reduce((acc, r) => {\n\t\t\tif (r.id !== role) return [...acc, r];\n\t\t\tconst persons = r.persons.reduce((accP, p) => {\n\t\t\t\tif (p.id !== id) return [...accP, p];\n\t\t\t\treturn accP;\n\t\t\t}, []);\n\t\t\treturn [...acc, { ...r, persons }];\n\t\t}, []);\n\t\tsetRoles(newRoles);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<h1 className=\"centered\">IAM example</h1>\n\t\t\t{loading && <p>Loading</p>}\n\t\t\t{!loading && (\n\t\t\t\t<Habilitation\n\t\t\t\t\tloadAgentList={API.loadAgentList}\n\t\t\t\t\tloadRoleList={() =>\n\t\t\t\t\t\tAPI.loadRoleList(roles).then(roles => {\n\t\t\t\t\t\t\tsetLoading(false);\n\n\t\t\t\t\t\t\treturn roles;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tdeleteAgent={a => handleDelete(a)}\n\t\t\t\t\taddAgent={a => handleAdd(a)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '@inseefr/wilco/dist/index.css';\nimport '@inseefr/iam/dist/index.css';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}