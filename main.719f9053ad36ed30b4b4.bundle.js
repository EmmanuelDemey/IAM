(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"basic",(function(){return basic})),__webpack_require__.d(__webpack_exports__,"WithHandleBack",(function(){return WithHandleBack}));__webpack_require__(23),__webpack_require__(152),__webpack_require__(143);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),home_container=__webpack_require__(168),react_router=__webpack_require__(127),dist=__webpack_require__(265),loadAgentList=(__webpack_require__(11),__webpack_require__(19),__webpack_require__(20),function(){return new Promise((function(resolve){setTimeout((function(){resolve([{id:"5e2819217a606efe20f8aa44",label:"Deleon Atkins"},{id:"5e281921920f0ea81cbee3b2",label:"Whitaker Knapp"},{id:"5e28192123962f88ad7ab1a2",label:"Yang Osborne"},{id:"5e2819216faa5304dbc3f64a",label:"Karla Carson"},{id:"5e28192123962f88ad7ab1a7",label:"Aang Asborne"},{id:"11111111111111",label:"Foo Bar"}])}),0)}))}),loadRoleList=function(){return new Promise((function(resolve){return setTimeout((function(){resolve(function(){var array=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return 1===array.length?array[0].groupes.map((function(_ref){return{id:_ref.cn,label:_ref.description,persons:_ref.personnes.map((function(_ref2){var label=_ref2.cn;return{id:_ref2.uid,label:label,stamp:_ref2.ou}}))}})):[]}([{cn:"homere-gestion",description:"Application de gestion pour Homere",groupes:[{uid:"1",cn:"gestion_pole_homere-gestion",description:"Groupe des gestionnaires aparteant au pôle",profils:[],personnes:[{uid:"11111111111111",cn:"Foo Bar",ou:"STAMP 1"}]},{uid:"2",cn:"gestion_pole_homere-gestion2",description:"Groupe des gestionnaires aparteant au pôle2",profils:[],personnes:[{uid:"11111111111111",cn:"Foo Bar",ou:"STAMP 1"},{uid:"5e28192123962f88ad7ab1a7",cn:"Aang Asborne",ou:"TEST"}]}],profils:[]}]))}),2e3)}))},basic=(__webpack_exports__.default={title:"Component/Habilitation",component:home_container.a,includeStories:[]},function(){return react_default.a.createElement(react_router.a,null,react_default.a.createElement(home_container.a,{loadRoleList:loadRoleList,loadAgentList:loadAgentList,displayUpdateBtn:Object(dist.boolean)("Display update button",!0)}))});basic.displayName="basic",basic.story={title:"Default"};var WithHandleBack=function(){return react_default.a.createElement(react_router.a,null,react_default.a.createElement(home_container.a,{loadRoleList:loadRoleList,loadAgentList:loadAgentList,handleBack:function handleBack(){return alert("handleBack")},displayUpdateBtn:Object(dist.boolean)("Display update button",!0)}))};WithHandleBack.displayName="WithHandleBack",WithHandleBack.story={title:"WithHandleBack"},basic.__docgenInfo={description:"",methods:[],displayName:"basic"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/1-Habilitation.stories.js"]={name:"basic",docgenInfo:basic.__docgenInfo,path:"stories/1-Habilitation.stories.js"}),WithHandleBack.__docgenInfo={description:"",methods:[],displayName:"WithHandleBack"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/1-Habilitation.stories.js"]={name:"WithHandleBack",docgenInfo:WithHandleBack.__docgenInfo,path:"stories/1-Habilitation.stories.js"})},1400:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(596);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(1424)],module)}.call(this,__webpack_require__(1401)(module))},1424:function(module,exports,__webpack_require__){var map={"./0-Welcome.stories.mdx":1425,"./1-Habilitation.stories.js":112,"./1-Habilitation.stories.mdx":1616};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1424},1425:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(11),__webpack_require__(59),__webpack_require__(51),__webpack_require__(21),__webpack_require__(14),__webpack_require__(82),__webpack_require__(56),__webpack_require__(349),__webpack_require__(350),__webpack_require__(16),__webpack_require__(55),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(18),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(96);__webpack_require__(1426),__webpack_require__(1434);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var name,Meta=(name="Meta",function(props){return console.warn("Component "+name+" was not imported, exported, or provided by MDXProvider as global scope"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("div",props)}),layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(Meta,{title:"Documentation/Intro",mdxType:"Meta"}),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"If you want to add the module into your own project, you should first install it via NPM or yarn"),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"Then, you need to include the CSS stylesheet of ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("inlineCode",{parentName:"p"},"bootstrap"),", and one from ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("inlineCode",{parentName:"p"},"@inseefr/wilco"),", the components library used by ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("strong",{parentName:"p"},"IAM"),", and finally the one from this module."),_ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("p",null,"And finally, you can import and use the component we provide.");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),_ref2,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h1",{id:"get-started"},"Get started"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-shell"}),"git clone https://github.com/InseeFr/IAM\ncd IAM\nyarn\nyarn start-storybook\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("h1",{id:"include-iam-in-my-project"},"Include IAM in my project"),_ref3,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-shell"}),"npm i @inseefr/iam bootstrap@3.4.1\n")),_ref4,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-javascript"}),"import 'bootstrap/dist/css/bootstrap.css';\nimport '@inseefr/wilco/dist/index.css';\nimport '@inseefr/iam/dist/index.css';\n")),_ref5,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)("code",_extends({parentName:"pre"},{className:"language-javascript"}),"import Habilitation from '@inseefr/iam';\n\n...\n<Habilitation\n        loadRoleList={...}\n        loadAgentList={...}\n    />\n")))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var __page=function(){throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};var componentMeta={title:"Documentation/Intro",includeStories:["__page"]};componentMeta.parameters=componentMeta.parameters||{};var _ref6=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_13__.AddContext,{mdxStoryNameToKey:{},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_12__.mdx)(MDXContent,null));componentMeta.parameters.docs=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},componentMeta.parameters.docs||{},{page:function page(){return _ref6}}),__webpack_exports__.default=componentMeta},1612:function(module,exports,__webpack_require__){var api=__webpack_require__(242),content=__webpack_require__(1613);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1613:function(module,exports,__webpack_require__){(exports=__webpack_require__(243)(!1)).push([module.i,".iam-roles-picker{color:black;width:100%}.iam-roles-picker ul{padding-bottom:0;border-bottom:0}.iam-roles-picker ul li{line-height:2em;padding-right:5px}.iam-roles-picker ul li:last-child{padding:0}.iam-roles-picker ul li input{margin:0.5em 0.5em 1em 1em}.iam-roles-picker ul li label{font-weight:normal}.iam-roles-picker ul li button{width:100%;margin:0}.iam-roles-picker button{width:70%}\n",""]),module.exports=exports},1614:function(module,exports,__webpack_require__){var api=__webpack_require__(242),content=__webpack_require__(1615);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},1615:function(module,exports,__webpack_require__){(exports=__webpack_require__(243)(!1)).push([module.i,".iam-visualisation tbody tr td:last-child{text-align:left !important}\n",""]),module.exports=exports},1616:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"defaultStory",(function(){return defaultStory})),__webpack_require__.d(__webpack_exports__,"withHandleBack",(function(){return withHandleBack}));__webpack_require__(11),__webpack_require__(59),__webpack_require__(51),__webpack_require__(21),__webpack_require__(25),__webpack_require__(14),__webpack_require__(82),__webpack_require__(56),__webpack_require__(349),__webpack_require__(350),__webpack_require__(16),__webpack_require__(55),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(18),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(96),_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(112),_src_home_container__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(168);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return(_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={},_ref2=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("p",null,"This component should be used if you need to manage the role of your users"),_ref3=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Props,{of:_src_home_container__WEBPACK_IMPORTED_MODULE_16__.a,mdxType:"Props"}),_ref4=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("p",null,"You also can add a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("inlineCode",{parentName:"p"},"back")," button and define the code that should be executed thanks to the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("inlineCode",{parentName:"p"},"handleBack")," prop");function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Meta,{title:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.title,component:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.component,mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)("h1",{id:"habilitation"},"Habilitation"),_ref2,_ref3,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Story,{name:"Default",mdxType:"Story"},_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.basic()),_ref4,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.Story,{name:"WithHandleBack",mdxType:"Story"},_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.WithHandleBack()))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var defaultStory=function(){return _1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.basic()};defaultStory.story={},defaultStory.story.name="Default",defaultStory.story.parameters={mdxSource:"stories.basic()"};var withHandleBack=function(){return _1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.WithHandleBack()};withHandleBack.story={},withHandleBack.story.name="WithHandleBack",withHandleBack.story.parameters={mdxSource:"stories.WithHandleBack()"};var componentMeta={title:_1_Habilitation_stories_js__WEBPACK_IMPORTED_MODULE_15__.default.title,includeStories:["defaultStory","withHandleBack"]};componentMeta.parameters=componentMeta.parameters||{};var _ref5=Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_14__.AddContext,{mdxStoryNameToKey:{Default:"defaultStory",WithHandleBack:"withHandleBack"},mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_13__.mdx)(MDXContent,null));componentMeta.parameters.docs=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},componentMeta.parameters.docs||{},{page:function page(){return _ref5}}),__webpack_exports__.default=componentMeta},168:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(11),__webpack_require__(19),__webpack_require__(32),__webpack_require__(31),__webpack_require__(75),__webpack_require__(37),__webpack_require__(26),__webpack_require__(20),__webpack_require__(57),__webpack_require__(38),__webpack_require__(25),__webpack_require__(23),__webpack_require__(152),__webpack_require__(44),__webpack_require__(27),__webpack_require__(29);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(62),prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),dictionary=(__webpack_require__(59),__webpack_require__(150),__webpack_require__(51),__webpack_require__(474),__webpack_require__(82),__webpack_require__(56),__webpack_require__(349),__webpack_require__(350),__webpack_require__(16),__webpack_require__(216),__webpack_require__(55),{pickedRolePlaceholder:{fr:"Sélectionner un rôle...",en:"Select a role..."},nameTitle:{fr:"Nom",en:"Name"},stampTitle:{fr:"Timbre",en:"Unit"},roleTitle:{fr:"Rôle",en:"Role"},save:{fr:"Valider",en:"Save"},manage:{fr:"Gérer",en:"Manage"},visualize:{fr:"Visualiser",en:"Visualize"}}),D1=Object(dist.createDictionary)(dist.firstLang,dictionary),D2=Object(dist.createDictionary)(dist.secondLang,dictionary),build_dictionary=Object(dist.getLang)()===dist.firstLang?D1:D2;__webpack_require__(135),__webpack_require__(21),__webpack_require__(136),__webpack_require__(1612);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _ref2=react_default.a.createElement("span",{className:"caret"});function RolesPicker(_ref){var _ref$roles=_ref.roles,roles=void 0===_ref$roles?[]:_ref$roles,_ref$person=_ref.person,person=void 0===_ref$person?{}:_ref$person,_ref$defaultOpen=_ref.defaultOpen,defaultOpen=void 0!==_ref$defaultOpen&&_ref$defaultOpen,handleSubmit=_ref.handleSubmit,_useState2=_slicedToArray(Object(react.useState)(defaultOpen),2),open=_useState2[0],setOpen=_useState2[1],_useState4=_slicedToArray(Object(react.useState)(person.roles),2),userRoles=_useState4[0],setUserRoles=_useState4[1],wrapperRef=Object(react.useRef)(null);!function useOutsideAlerter(ref,callback){function handleClickOutside(event){ref.current&&!ref.current.contains(event.target)&&"HTML"!==event.target.tagName&&callback()}Object(react.useEffect)((function(){return document.addEventListener("mousedown",handleClickOutside),function(){document.removeEventListener("mousedown",handleClickOutside)}}),[])}(wrapperRef,(function(){return setOpen(!1)}));var handleClick=Object(react.useCallback)((function(e){e.preventDefault(),setOpen(!open)}),[open]),handleButtonClick=Object(react.useCallback)((function(){var addArray=userRoles.filter((function(role){return!person.roles.includes(role)})),delArray=person.roles.filter((function(role){return!userRoles.includes(role)})),toAdd=0<addArray.length?[{id:person.id,roles:addArray.map((function(label){return roles.find((function(r){return r.label===label})).id}))}]:[],toDelete=0<delArray.length?delArray.map((function(label){return{role:roles.find((function(r){return r.label===label})).id,id:person.id}})):[];handleSubmit({toAdd:toAdd,toDelete:toDelete}),setOpen(!open)}),[userRoles]),handleRoleClick=function(role){return Object(react.useCallback)((function(){var newUserRoles=userRoles.includes(role.label)?userRoles.filter((function(label){return label!==role.label})):[].concat(_toConsumableArray(userRoles),[role.label]);setUserRoles(newUserRoles)}),[userRoles])};return react_default.a.createElement("div",{ref:wrapperRef,className:"iam-roles-picker btn-group ".concat(open?"open":"")},react_default.a.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:handleClick},build_dictionary.manage," ",_ref2),react_default.a.createElement("ul",{className:"dropdown-menu"},roles.map((function(role){return react_default.a.createElement("li",{key:role.label},react_default.a.createElement("label",null,react_default.a.createElement("input",{onChange:handleRoleClick(role),type:"checkbox",checked:0<=userRoles.indexOf(role.label)}),role.label))})),react_default.a.createElement("li",null,react_default.a.createElement("button",{onClick:handleButtonClick},build_dictionary.save))))}RolesPicker.displayName="RolesPicker",RolesPicker.__docgenInfo={description:"",methods:[],displayName:"RolesPicker",props:{roles:{defaultValue:{value:"[]",computed:!1},required:!1},person:{defaultValue:{value:"{}",computed:!1},required:!1},defaultOpen:{defaultValue:{value:"false",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/roles-picker/index.js"]={name:"RolesPicker",docgenInfo:RolesPicker.__docgenInfo,path:"src/roles-picker/index.js"});__webpack_require__(1614);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function visualisation_toConsumableArray(arr){return function visualisation_arrayWithoutHoles(arr){if(Array.isArray(arr))return visualisation_arrayLikeToArray(arr)}(arr)||function visualisation_iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||visualisation_unsupportedIterableToArray(arr)||function visualisation_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function visualisation_slicedToArray(arr,i){return function visualisation_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function visualisation_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||visualisation_unsupportedIterableToArray(arr,i)||function visualisation_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function visualisation_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return visualisation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?visualisation_arrayLikeToArray(o,minLen):void 0}}function visualisation_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var VIEW="VIEW",rowParams=[{dataField:"label",text:build_dictionary.nameTitle,width:"40%",sort:!0},{dataField:"stamp",text:build_dictionary.stampTitle,width:"30%",sort:!0},{dataField:"roles",text:build_dictionary.roleTitle,width:"30%",sort:!0}],visualisation_ref2=react_default.a.createElement("div",null);function VisualisationTable(_ref){var _ref$roles=_ref.roles,roles=void 0===_ref$roles?[]:_ref$roles,_ref$agents=_ref.agents,agents=void 0===_ref$agents?[]:_ref$agents,handleBack=_ref.handleBack,_ref$displayUpdateBtn=_ref.displayUpdateBtn,displayUpdateBtn=void 0===_ref$displayUpdateBtn||_ref$displayUpdateBtn,handleSave=_ref.handleSave,_ref$mode=_ref.mode,mode=void 0===_ref$mode?VIEW:_ref$mode,toggleMode=_ref.toggleMode,_useState2=visualisation_slicedToArray(Object(react.useState)([]),2),personsWithRoles=_useState2[0],setPersonsWithRoles=_useState2[1],_useState4=visualisation_slicedToArray(Object(react.useState)([]),2),personsWithoutRoles=_useState4[0],setPersonsWithoutRoles=_useState4[1];Object(react.useEffect)((function(){for(var personsWithRoles={},_loop=function(i){roles[i].persons.forEach((function(p){personsWithRoles[p.id]?personsWithRoles[p.id].roles.push(roles[i].label):personsWithRoles[p.id]=_objectSpread({},p,{roles:[roles[i].label]})}))},i=0;i<roles.length;i++)_loop(i);setPersonsWithRoles(visualisation_toConsumableArray(Object.values(personsWithRoles).sort(sortPersons)))}),[roles]),Object(react.useEffect)((function(){for(var personsWithoutRoles={},i=0;i<agents.length;i++)personsWithoutRoles[agents[i].id]=_objectSpread({},agents[i],{roles:[]});setPersonsWithoutRoles(visualisation_toConsumableArray(Object.values(personsWithoutRoles).sort(sortPersons)))}),[agents,personsWithRoles]);var persons=[].concat(visualisation_toConsumableArray(personsWithRoles),visualisation_toConsumableArray(personsWithoutRoles.filter((function(person){return!personsWithRoles.find((function(p){return p.id===person.id}))})))),sortPersons=function(p1,p2){return p1.label.localeCompare(p2.label)},data=persons.map((function(person){return _objectSpread({},person,{roles:mode===VIEW?react_default.a.createElement("ul",null,person.roles.map((function(role,index){return react_default.a.createElement("li",{key:"".concat(person.id,"-").concat(index)},role)}))):react_default.a.createElement(RolesPicker,{roles:roles,person:person,handleSubmit:handleSave})})}));return react_default.a.createElement("div",{className:"container iam-visualisation"},react_default.a.createElement(dist.ActionToolbar,null,handleBack?react_default.a.createElement(dist.ReturnButton,{action:function action(){return handleBack()}}):visualisation_ref2,mode===VIEW&&displayUpdateBtn&&react_default.a.createElement(dist.UpdateButton,{action:toggleMode}),"EDIT"===mode&&displayUpdateBtn&&react_default.a.createElement(dist.Button,{action:toggleMode},build_dictionary.visualize)),react_default.a.createElement(dist.Table,{rowParams:rowParams,data:data,search:!0,pagination:!0}))}VisualisationTable.displayName="VisualisationTable",VisualisationTable.__docgenInfo={description:"",methods:[],displayName:"VisualisationTable",props:{roles:{defaultValue:{value:"[]",computed:!1},required:!1},agents:{defaultValue:{value:"[]",computed:!1},required:!1},displayUpdateBtn:{defaultValue:{value:"true",computed:!1},required:!1},mode:{defaultValue:{value:"'VIEW'",computed:!1},required:!1}}};var src_visualisation=VisualisationTable;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/visualisation/index.js"]={name:"VisualisationTable",docgenInfo:VisualisationTable.__docgenInfo,path:"src/visualisation/index.js"});__webpack_require__(88);function agents_toConsumableArray(arr){return function agents_arrayWithoutHoles(arr){if(Array.isArray(arr))return agents_arrayLikeToArray(arr)}(arr)||function agents_iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function agents_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return agents_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return agents_arrayLikeToArray(o,minLen)}(arr)||function agents_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function agents_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function home_container_toConsumableArray(arr){return function home_container_arrayWithoutHoles(arr){if(Array.isArray(arr))return home_container_arrayLikeToArray(arr)}(arr)||function home_container_iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||home_container_unsupportedIterableToArray(arr)||function home_container_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function home_container_slicedToArray(arr,i){return function home_container_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function home_container_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||home_container_unsupportedIterableToArray(arr,i)||function home_container_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function home_container_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return home_container_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?home_container_arrayLikeToArray(o,minLen):void 0}}function home_container_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var home_container_ref2=react_default.a.createElement(dist.Loading,null),Habilitation=function(_ref){var addAgent=_ref.addAgent,deleteAgent=_ref.deleteAgent,loadRoleList=_ref.loadRoleList,loadAgentList=_ref.loadAgentList,handleBack=_ref.handleBack,displayUpdateBtn=_ref.displayUpdateBtn,_useState2=home_container_slicedToArray(Object(react.useState)(VIEW),2),mode=_useState2[0],setMode=_useState2[1],_useState4=home_container_slicedToArray(Object(react.useState)([]),2),agents=_useState4[0],setAgents=_useState4[1],_useState6=home_container_slicedToArray(Object(react.useState)([]),2),roles=_useState6[0],setRoles=_useState6[1],_useState8=home_container_slicedToArray(Object(react.useState)(!0),2),loading=_useState8[0],setLoading=_useState8[1],handleAddAgent=function(agents){return function(agents){return Array.isArray(agents)?agents.reduce((function(acc,_ref){var id=_ref.id,subAcc=_ref.roles.reduce((function(_,role){return[].concat(agents_toConsumableArray(_),[{id:id,role:role}])}),[]);return[].concat(agents_toConsumableArray(acc),agents_toConsumableArray(subAcc))}),[]):[]}(agents).map((function(a){return addAgent(a)}))};Object(react.useEffect)((function(){setLoading(!0),loadRoleList().then((function(roles){setRoles(roles),setLoading(!1)}))}),[]),Object(react.useEffect)((function(){"EDIT"===mode&&0===agents.length&&(setLoading(!0),loadAgentList().then((function(agents){setAgents(agents),setLoading(!1)})))}),[mode]);var toggleMode=Object(react.useCallback)((function(){setMode(mode===VIEW?"EDIT":VIEW)}),[mode]);if(loading)return home_container_ref2;var agentsProps="EDIT"===mode?agents:[];return react_default.a.createElement(src_visualisation,{roles:roles,handleBack:handleBack,displayUpdateBtn:displayUpdateBtn,agents:agentsProps,handleSave:function handleSave(data){var toAdd=data.toAdd,toDelete=data.toDelete,agentActions=[];0!==toAdd.length&&(agentActions=[].concat(home_container_toConsumableArray(agentActions),home_container_toConsumableArray(handleAddAgent(toAdd)))),0!==toDelete.length&&(agentActions=[].concat(home_container_toConsumableArray(agentActions),home_container_toConsumableArray(function(agents){return agents.map((function(a){return deleteAgent(a)}))}(toDelete)))),Promise.all(agentActions).then((function(){loadRoleList().then((function(roles){setMode(VIEW),setRoles(roles)}))}))},mode:mode,toggleMode:toggleMode})};Habilitation.displayName="Habilitation",Habilitation.propTypes={loadAgentList:prop_types_default.a.func.isRequired,loadRoleList:prop_types_default.a.func.isRequired,deleteAgent:prop_types_default.a.func.isRequired,addAgent:prop_types_default.a.func.isRequired,handleBack:prop_types_default.a.func,displayUpdateBtn:prop_types_default.a.bool},Habilitation.defaultProps={loadAgentList:function loadAgentList(){return Promise.resolve()},loadRoleList:function loadRoleList(){return Promise.resolve()},deleteAgent:function deleteAgent(){return Promise.resolve()},addAgent:function addAgent(){return Promise.resolve()},displayUpdateBtn:!0},Habilitation.__docgenInfo={description:"",methods:[],displayName:"Habilitation",props:{loadAgentList:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:"Function returin a Promise. When this promise \n\t  is resolved, will return the list of agents."},loadRoleList:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:"Function returin a Promise. When this promise \n\t  is resolved, will return the list of roles."},deleteAgent:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},addAgent:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},displayUpdateBtn:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},handleBack:{type:{name:"func"},required:!1,description:""}}};__webpack_exports__.a=Habilitation;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/home-container.js"]={name:"Habilitation",docgenInfo:Habilitation.__docgenInfo,path:"src/home-container.js"})},599:function(module,exports,__webpack_require__){__webpack_require__(600),__webpack_require__(742),__webpack_require__(743),__webpack_require__(1390),__webpack_require__(1391),module.exports=__webpack_require__(1400)},662:function(module,exports){}},[[599,1,2]]]);
//# sourceMappingURL=main.719f9053ad36ed30b4b4.bundle.js.map